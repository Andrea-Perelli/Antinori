@model List<Sinafi.Models.Iscritti>
   
<div id="DataTables_Table_0_wrapper" >
    <table class="table dataTable table-hover compact" id="DataTables_Table_0" role="grid" aria-describedby="DataTables_Table_0_info">
        <thead>
            <tr role="row">
                <th tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" style="width: 20px;"></th>
                <th class="sorting" tabindex="0" style="width: 55px;">Numero</th>
                <th class="sorting_asc" tabindex="0" aria-sort="ascending" style="width: 150px;">Nome</th>
                <th class="sorting" style="width: 100px;">Data Nascita</th>
                <th class="sorting" style="width: 100px;">Luogo Nascita</th>
                <th class="sorting" style="width: 150px;">Residenza</th>
                <th class="sorting" style="width: 100px;">Cellulare</th>
                <th class="sorting" style="width: 150px;">Email</th>
                <th class="sorting" style="width: 100px;">In servizio presso</th>
                <th class="sorting" style="width: 150px;">Con il grado di</th>
                <th class="sorting" style="width: 150px;"></th>
                <th>Iscrizione</th>
                <th aria-controls="DataTables_Table_0" style="width: 250px;"></th>
            </tr>
        </thead>
        <tbody>
            @{
                string classe = "";
                string classeSTR = "";
            }
            @foreach (var u in Model)
            {
                if (u.Scaduto)
                {
                    classe = "scaduto";
                    classeSTR = "Iscrizione scaduta";
                }
                else if (u.InScadenza)
                {
                    classe = "inscadenza";
                    classeSTR = "Iscrizione in scadenza";
                }
                else if (u.Pagata)
                {
                    classe = "pagata";
                    classeSTR = "Iscrizione pagata ma non confermata";
                }
                else if (!u.Ok)
                {
                    classe = "nonOk";
                    classeSTR = "Iscrizione con problemi";
                }
                else
                {
                    classe = "";
                    classeSTR = "";
                }
            <tr role="row">
                <td  class="@classe" title="@classeSTR">
                    <a href="#" onclick="attivo('@u.Id')">
                        @if (u.Attivo)
                        {
                            <i class="fa fa-circle" style="color:green" title="Disattiva iscritto"></i>
                        }
                        else
                        {
                            <i class="fa fa-circle-o" style="color:red" title="Attiva iscritto"></i>
                        }
                    </a>
                </td>
                <td class="sorting_1">@u.IdNumerico</td>
                <td class="sorting_1">@u.Cognome @u.Nome</td>
                <td>@u.DataNascita</td>
                <td>@u.LuogoNascita</td>
                <td>
                    @u.Indirizzo @u.NCivico @u.CAP @u.Comune @u.Provincia
                </td>
                <td>
                    @u.Tel1
                </td>
                <td>
                    @u.Email
                </td>
                <td>@u.Servizio_Luogo</td>
                <td>@u.Servizio_Grado</td>
                <td>@u.TipoServizio</td>
                <td>
                    @u.data_inizio.ToShortDateString() - @u.data_fine.ToShortDateString()
                </td>
                <td>
                    <button class="btn btn-default btn-sm" onclick="dtls('@u.Id')" title="Dettagli iscritto"><i class="fa fa-pencil"></i></button>
                    @if (User.IsInRole("Amministrazione") || User.IsInRole("Gestione_Iscritti")) {
                        <button class="btn btn-default btn-sm" onclick="edit('@u.Id')" title="Modifica iscritto"><i class="fa fa-edit"></i></button>
                        <button class="btn btn-default btn-sm" onclick="sendMail_get('@u.Id')" title="Invia mail iscrizione"><i class="fa fa-mail-forward"></i></button>
                        <button class="btn btn-default btn-sm" onclick="sendMail_renew_get('@u.Id')" title="Invia link di rinnovo"><i class="fa fa-calendar-check-o"></i></button>
                        <button class="btn btn-default btn-sm" onclick="pdf('@u.Id')" title="Produci modulo"><i class="fa fa-file-pdf-o"></i></button>
                    }
                    @if (User.IsInRole("Amministrazione") || User.IsInRole("Gestione_Utenti")) {
                        <button class="btn btn-default btn-sm" onclick="trasforma('@u.Id','@u.Provincia')" title="Trasforma in utente"><i class="fa fa-user"></i></button>
                    }
                    @if (User.IsInRole("Amministrazione")) {
                        <button class="btn btn-default btn-sm" onclick="delete_get('@u.Id')" title="Cancella iscritto"><i class="fa fa-trash-o"></i></button>
                    }
                </td>
            </tr>
            }


        </tbody>
        <tfoot>
            <tr>
                <th colspan="13"></th>                
            </tr>
        </tfoot>
    </table>

</div>
